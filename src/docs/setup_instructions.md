# Инструкция по настройке системы бронирования гостиницы "Лесной дворик" на хостинге Beget

## Содержание

1. [Предварительные требования](#предварительные-требования)
2. [Загрузка файлов на хостинг](#загрузка-файлов-на-хостинг)
3. [Создание базы данных](#создание-базы-данных)
4. [Импорт структуры базы данных](#импорт-структуры-базы-данных)
5. [Настройка подключения к базе данных](#настройка-подключения-к-базе-данных)
6. [Настройка обработки форм](#настройка-обработки-форм)
7. [Доступ к административной панели](#доступ-к-административной-панели)
8. [Безопасность](#безопасность)
9. [Настройка почтовых уведомлений](#настройка-почтовых-уведомлений)
10. [Тестирование](#тестирование)
11. [Решение проблем](#решение-проблем)

## Предварительные требования

Для работы системы бронирования необходимо:
- Аккаунт на хостинге Beget
- Доступ к панели управления Beget
- Доступ к FTP/SFTP для загрузки файлов
- Доступ к phpMyAdmin для работы с базой данных

## Загрузка файлов на хостинг

1. Войдите в личный кабинет Beget
2. Перейдите в раздел "Файловый менеджер" или подключитесь через FTP-клиент
3. Загрузите все файлы из папки `site_files_for_beget` в корневую директорию вашего сайта (обычно это папка `public_html` или домен вашего сайта)
4. Убедитесь, что все файлы и папки имеют правильные права доступа:
   - Файлы: 644 (чтение и запись для владельца, чтение для группы и остальных)
   - Папки: 755 (чтение, запись и выполнение для владельца, чтение и выполнение для группы и остальных)
   - Для папки `admin/uploads` (если планируете загружать фотографии): 777

## Создание базы данных

1. Войдите в личный кабинет Beget
2. Перейдите в раздел "MySQL"
3. Нажмите "Создать базу данных" и заполните необходимые поля:
   - Имя базы данных (обычно начинается с вашего логина, например `login_hotel`)
   - Пароль для базы данных (используйте надежный пароль)
4. Сохраните данные доступа к базе данных для дальнейшего использования

## Импорт структуры базы данных

1. Перейдите в раздел "MySQL" личного кабинета Beget
2. Выберите созданную базу данных и нажмите "PhpMyAdmin"
3. В интерфейсе phpMyAdmin выберите вкладку "Импорт"
4. Нажмите "Выберите файл" и укажите файл `db_setup.sql` из загруженных файлов
5. Нажмите "Выполнить" для импорта структуры базы данных

## Настройка подключения к базе данных

1. Откройте файл `db_config.php` через файловый менеджер или FTP-клиент
2. Отредактируйте следующие строки, заменив их на ваши данные доступа к базе данных:

```php
$db_host = 'localhost'; // Обычно не меняется для Beget
$db_name = 'login_hotel'; // Замените на имя вашей базы данных
$db_user = 'login_hotel'; // Замените на пользователя базы данных (обычно совпадает с именем БД)
$db_pass = 'your_password'; // Замените на пароль от базы данных
```

3. Сохраните изменения

## Настройка обработки форм

1. Откройте файл `index.html` и найдите форму бронирования
2. Убедитесь, что форма имеет правильный атрибут `action`:

```html
<form class="booking-form" id="hotel-booking-form" action="save_booking.php" method="post">
```

3. Если вы хотите изменить получателя уведомлений о бронированиях, откройте файл `save_booking.php` и найдите строку:

```php
$to = 'admin@lesnoy-dvorik.ru'; // Замените на свой email
```

4. Замените email на ваш актуальный адрес электронной почты

## Доступ к административной панели

1. После установки и настройки системы, административная панель будет доступна по адресу:
   ```
   https://ваш-сайт.ru/admin/
   ```

2. Для входа используйте следующие данные:
   - Логин: `admin`
   - Пароль: `admin123`

3. **ВАЖНО**: После первого входа немедленно смените пароль! Для этого:
   - Перейдите в раздел "Профиль" в административной панели
   - Нажмите "Изменить пароль"
   - Введите новый надежный пароль и сохраните изменения

## Безопасность

Для повышения безопасности рекомендуется:

1. Изменить стандартные данные доступа к административной панели
2. Использовать сложные пароли для БД и административной панели
3. Регулярно создавать резервные копии базы данных
4. Настроить HTTPS для защиты передачи данных
5. Ограничить доступ к папке `admin` с помощью `.htaccess`:

```
# Защита папки admin
<Files ~ "^.*\.php">
    Order Deny,Allow
    Deny from all
    Allow from 127.0.0.1 # Замените на ваш IP-адрес
</Files>
```

## Настройка почтовых уведомлений

1. Для активации отправки уведомлений на email откройте файл `save_booking.php`
2. Найдите и раскомментируйте строку:

```php
// mail($to, $subject, $message);
```

3. Для более надежной отправки почты рекомендуется настроить SMTP. Добавьте следующий код перед вызовом функции `mail()`:

```php
// Настройка заголовков
$headers = "From: booking@ваш-сайт.ru\r\n";
$headers .= "Reply-To: booking@ваш-сайт.ru\r\n";
$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-Type: text/plain; charset=UTF-8\r\n";

mail($to, $subject, $message, $headers);
```

## Тестирование

После завершения установки и настройки, необходимо протестировать:

1. Отображение всех страниц сайта
2. Работу формы бронирования:
   - Заполните форму и отправьте бронирование
   - Проверьте страницу подтверждения
   - Убедитесь, что данные сохранены в базе данных
3. Работу административной панели:
   - Вход в панель
   - Просмотр списка бронирований
   - Изменение статуса бронирования
   - Экспорт бронирований в CSV

## Решение проблем

### Ошибка подключения к базе данных

1. Проверьте правильность данных в файле `db_config.php`
2. Убедитесь, что база данных создана и доступна
3. Проверьте права доступа пользователя к базе данных

### Ошибка при отправке формы

1. Проверьте права доступа файла `save_booking.php` (должны быть 644)
2. Проверьте в логах ошибок PHP (обычно доступны в панели управления Beget)
3. Убедитесь, что все обязательные поля в форме заполнены

### Не работает административная панель

1. Проверьте наличие всех файлов в папке `admin`
2. Убедитесь, что таблица `admin_users` создана и содержит демо-пользователя
3. Проверьте права доступа к файлам в папке `admin`

### Для получения поддержки

Если у вас возникли вопросы или проблемы при установке и настройке системы, обратитесь к администратору или разработчику.

---

© 2025 Гостиница "Лесной дворик". Все права защищены. 